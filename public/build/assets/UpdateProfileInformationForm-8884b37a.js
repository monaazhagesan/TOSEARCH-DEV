import{r as d,j as L,i as a,o as m,c as P,w as t,x as E,T as N,f as s,d as k,a as r,b as n,y as u,M as p,a5 as U,h as c,e as f,n as V,a4 as A}from"./app-a9ec9377.js";import{_ as j}from"./ActionMessage-21280f3e.js";import{_ as M}from"./FormSection-7fab2c12.js";import{a as T,_ as R}from"./TextInput-9fc27357.js";import{_ as q}from"./InputLabel-b4028a37.js";import{_ as z}from"./PrimaryButton-78c7ef01.js";import{_ as D}from"./SecondaryButton-a324488e.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import{I as Y,F as G,B as H}from"./index-c4860977.js";import"./SectionTitle-f4cc5261.js";import"./collapseMotion-cc415b30.js";const w=d(null),_=d(null),i=d(null),J=()=>{i.value&&(form.photo=i.value.files[0]),form.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>v()})},K=()=>{w.value=!0},Q=()=>{i.value.click()},W=()=>{const e=i.value.files[0];if(!e)return;const o=new FileReader;o.onload=h=>{_.value=h.target.result},o.readAsDataURL(e)},X=()=>{A.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{_.value=null,v()}})},v=()=>{var e;(e=i.value)!=null&&e.value&&(i.value.value=null)},Z=L({props:{user:Object},components:{Link:E,"a-input":Y,"a-form-item":G,"a-button":H,ActionMessage:j,FormSection:M,InputError:T,InputLabel:q,PrimaryButton:z,SecondaryButton:D,TextInput:R},setup(e){const o=N({_method:"PUT",name:e.user.name,email:e.user.email,photo:null});return{props:e,form:o,verificationLinkSent:w,photoPreview:_,photoInput:i,updateProfileInformation:J,sendEmailVerification:K,selectNewPhoto:Q,updatePhotoPreview:W,deletePhoto:X,clearPhotoFileInput:v}}}),x={key:0,class:"col-span-6 sm:col-span-4"},ee=r("br",null,null,-1),oe={class:"mt-2"},te=["src","alt"],ne={class:"mt-2"},ae={key:1},se={class:"text-sm mt-2"},re={class:"mt-2 font-medium text-sm text-green-600"};function ie(e,o,h,le,me,ue){const S=a("InputLabel"),b=a("SecondaryButton"),I=a("InputError"),g=a("a-input"),y=a("a-form-item"),C=a("Link"),$=a("ActionMessage"),B=a("a-button"),F=a("FormSection");return m(),P(F,{onSubmitted:e.updateProfileInformation},{title:t(()=>[s(" Profile Information ")]),description:t(()=>[s(" Update your account's profile information and email address. ")]),form:t(()=>[e.$page.props.jetstream.managesProfilePhotos?(m(),k("div",x,[r("input",{id:"photo",ref:"photoInput",type:"file",class:"hidden",onChange:o[0]||(o[0]=(...l)=>e.updatePhotoPreview&&e.updatePhotoPreview(...l)),style:{"margin-bottom":"12px"}},null,544),ee,n(S,{for:"photo",value:"Photo"}),u(r("div",oe,[r("img",{src:e.user.profile_photo_url,alt:e.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,te)],512),[[p,!e.photoPreview]]),u(r("div",ne,[r("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:U("background-image: url('"+e.photoPreview+"');")},null,4)],512),[[p,e.photoPreview]]),n(b,{class:"mt-2 me-2",type:"button",onClick:c(e.selectNewPhoto,["prevent"])},{default:t(()=>[s(" Select A New Photo ")]),_:1},8,["onClick"]),e.user.profile_photo_path?(m(),P(b,{key:0,type:"button",class:"mt-2",onClick:c(e.deletePhoto,["prevent"])},{default:t(()=>[s(" Remove Photo ")]),_:1},8,["onClick"])):f("",!0),n(I,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])])):f("",!0),n(y,{label:"Name",name:"name",class:"mt-2","label-col":{span:1},"wrapper-col":{span:6}},{default:t(()=>[n(g,{value:e.form.name,"onUpdate:value":o[1]||(o[1]=l=>e.form.name=l),id:"name",type:"text",required:"",autofocus:"",autocomplete:"name"},null,8,["value"])]),_:1}),n(y,{label:"Email",name:"email","label-col":{span:1},"wrapper-col":{span:6}},{default:t(()=>[n(g,{value:e.form.email,"onUpdate:value":o[2]||(o[2]=l=>e.form.email=l),id:"email",type:"email",required:"",autofocus:"",autocomplete:"username"},null,8,["value"])]),_:1}),e.$page.props.jetstream.hasEmailVerification&&e.user.email_verified_at===null?(m(),k("div",ae,[r("p",se,[s(" Your email address is unverified. "),n(C,{href:e.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:c(e.sendEmailVerification,["prevent"])},{default:t(()=>[s(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),u(r("div",re," A new verification link has been sent to your email address. ",512),[[p,e.verificationLinkSent]])])):f("",!0)]),actions:t(()=>[n($,{on:e.form.recentlySuccessful,class:"me-3"},{default:t(()=>[s(" Saved. ")]),_:1},8,["on"]),n(B,{type:"primary","html-type":"submit",class:V([{"opacity-25":e.form.processing},"login-form-button"]),disabled:e.form.processing},{default:t(()=>[s("Save")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])}const ke=O(Z,[["render",ie]]);export{ke as default};
